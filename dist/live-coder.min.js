var Live=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),i=n(2),o=function(){function e(t){void 0===t&&(t={}),this.config=Object.assign({},e.DEFAULT_CONFIG,t),this.domReady=i.waitForDom(),this.paused=new r.Deferred,this.isPaused=!0,this.init()}return e.isElementAttached=function(e){return!!e.parentElement},e.appendIfApply=function(t,n,r){t&&n&&"apply"===t.toLowerCase()&&!e.isElementAttached(n)&&r&&r.appendChild(n)},e.prototype.init=function(){var e=this;this.domReady.then(function(){e.$runner=document.getElementsByTagName("head")[0]||document.body,e.$defContainer=e.createElement(e.config.defaultContainer),e.$body=document.body,e.$display=e.getDisplay(),e.config.pauseOnClick&&(e.togglePauseListener=e.togglePause.bind(e),document.addEventListener("click",e.togglePauseListener)),e.config.paused?e.pause():e.resume()})},e.prototype.evalElement=function(e){this.$runner.appendChild(e)},e.prototype.togglePause=function(){this.isPaused?this.resume():this.pause()},e.prototype.createElement=function(e,t,n){void 0===t&&(t={});for(var r=document.createElement(e),i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];r[s]=t[s]}return n&&n.appendChild(r),r},e.prototype.getDisplay=function(){return document.querySelector("."+this.config.displayClass)||this.createDisplay()},e.prototype.createDisplay=function(){return this.createElement("pre",{className:this.config.displayClass},document.body)},e.prototype.createStyle=function(){return this.createElement("style",{type:"text/css"})},e.prototype.createScript=function(){return this.createElement("script",{type:"text/javascript"})},e.prototype.createDirective=function(){return this.createElement("code",{className:this.config.dirClass})},e.prototype.createCode=function(e){return this.createElement("code",{className:e})},e.prototype.createStylesheetLink=function(){return this.createElement("link",{rel:"stylesheet",type:"text/css"})},e.prototype.writeAndScroll=function(t,n){e.isElementAttached(n)||this.$display.appendChild(n),"function"==typeof this.config.writeChar?this.config.writeChar(t,n):n.textContent+=t,this.$display.scrollTop=this.$display.scrollHeight},e.prototype.continue=function(e){return Promise.all([this.paused.promise,e])},e.prototype.run=function(t){var n=this;return void 0===t&&(t=""),this.continue(this.domReady).then(function(){var r,o,s,a,c,l,u=t.trim().split("\n");return i.asyncForOf(function(t){var u,p=Promise.resolve(),d=t.split(""),f=t.match(e.DIR_RE);return f?(c=n.createDirective(),u=i.asyncForOf(function(e){return n.writeAndScroll(e,c),n.continue(p)},d,n.config.typingSpeed).then(function(){n.$display.innerHTML+="\n";var t=f[1].split(":"),i=t[0],c=t.slice(1);switch(i.toLowerCase()){case"css":a=null,o=null,s="",r=n.createStyle(),l=n.createCode(n.config.cssClass),e.appendIfApply(c[0],r,n.$runner);break;case"js":r=null,o=null,s="",a=n.createScript(),l=n.createCode(n.config.jsClass);break;case"html":if(a=null,r=null,s="",c[0]){var u=c[0],d=c[1];"apply"===u.toLowerCase()&&(g=[d||"",u],u=g[0],d=g[1]);var h=u.match(e.SEL_RE);if(u&&h){if(o=document.querySelector(u),!o){var y=[h[1]||"div",h[3],h[4]],m=y[0],C=y[1],v=y[2];if(o=n.createElement(m),C&&v)switch(C){case".":o.className=v;break;case"#":o.id=v}e.appendIfApply(d,o,n.$body)}}else o=n.$defContainer,e.appendIfApply(d,o,n.$body)}o=o||n.$defContainer,l=n.createCode(n.config.htmlClass),s=o.innerHTML;break;case"apply":r&&!e.isElementAttached(r)?(n.evalElement(r),r=n.createStyle(),l=n.createCode(n.config.cssClass)):o&&!e.isElementAttached(o)?(n.$body.appendChild(o),l=n.createCode(n.config.htmlClass)):a&&!e.isElementAttached(a)&&(n.evalElement(a),a=n.createScript(),l=n.createCode(n.config.jsClass));break;case"await":case"promise":window[c[0]]instanceof Promise&&(p=window[c[0]])}return n.continue(p);var g})):u=i.asyncForOf(function(e){return n.writeAndScroll(e,l),r?r.textContent+=e:o?(s+=e,o.innerHTML=s):a&&(a.textContent+=e),n.continue(p)},d,n.config.typingSpeed).then(function(){return n.writeAndScroll("\n",l),r?r.textContent+="\n":a&&(a.textContent+="\n"),n.continue(p)}),u},u).then(function(){return r=null,o=null,s="",a=null,c=null,l=null,Promise.resolve()})})},e.prototype.setTypingSpeed=function(e){this.config.typingSpeed=e},e.prototype.setWriteChar=function(e){this.config.writeChar=e},e.prototype.pause=function(e){var t=this;this.paused=new r.Deferred,this.isPaused=!0,"number"==typeof e&&setTimeout(function(){return t.resume()},e)},e.prototype.resume=function(){this.paused.resolve(),this.isPaused=!1},e.prototype.getDeferredPromise=function(){return new r.Deferred},e.prototype.loadStyle=function(e){var t=this.createStylesheetLink();t.href=e,this.evalElement(t)},e.prototype.loadScript=function(e){var t=this.createScript(),n=this.getDeferredPromise();return t.onload=n.resolve,t.src=e,this.evalElement(t),n.promise},e.prototype.destroy=function(){this.togglePauseListener&&document.removeEventListener("click",this.togglePauseListener)},e.DIR_RE=/^\s*---\s*([a-z0-9|\-|_|\.|#|:]+)?/i,e.SEL_RE=/^([a-z0-9|\-|_]+)?((\.|#)([a-z0-9|\-|_]+))?$/i,e.DEFAULT_CONFIG={displayClass:"live-coder__display",dirClass:"directive",htmlClass:"html",cssClass:"css",jsClass:"javascript",defaultContainer:"default-container",typingSpeed:50,pauseOnClick:!0,paused:!1,writeChar:function(e,t){t.textContent+=e}},e}();t.Coder=o},function(e,t){"use strict";var n=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();t.Deferred=n},function(e,t,n){"use strict";function r(e,t,n){var r=new s.Deferred,i=function(){t()?e().then(function(){n?setTimeout(i,n):i()}).catch(function(){return r.reject()}):r.resolve()};return i(),r.promise}function i(e,t,n){var i=0,o=t.length,s=function(){return i<o},a=function(){var n=t[i],r=e(n);return i++,r};return r(a,s,n)}function o(){return new Promise(function(e){/comp|inter|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(){return e()})})}var s=n(1);t.asyncLoop=r,t.asyncForOf=i,t.waitForDom=o}]);
//# sourceMappingURL=live-coder.min.js.map