var Live=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r,i=n(1),o=n(2);!function(e){e[e.READY=0]="READY",e[e.RUNNING=1]="RUNNING",e[e.PAUSED=2]="PAUSED",e[e.READY_PAUSED=3]="READY_PAUSED"}(r=t.CoderState||(t.CoderState={}));var a=function(){function e(t){void 0===t&&(t={}),this.config=Object.assign({},e.DEFAULT_CONFIG,t),this.domReady=o.waitForDom(),this.paused=new i.Deferred,this.init()}return e.isElementAttached=function(e){return!!e.parentElement},e.appendIfApply=function(t,n,r){t&&n&&"apply"===t.toLowerCase()&&!e.isElementAttached(n)&&r&&r.appendChild(n)},e.prototype.init=function(){var e=this;this.domReady.then(function(){e.$runner=document.getElementsByTagName("head")[0]||document.body,e.$defContainer=e.createElement(e.config.defaultContainer),e.$body=document.body,e.$display=e.createDisplay(),e.config.pauseOnClick&&document.addEventListener("click",e.clickPause.bind(e)),e.config.paused?e.pause():e.resume()})},e.prototype.clickPause=function(){switch(this.state){case r.PAUSED:case r.READY_PAUSED:this.resume();break;case r.READY:case r.RUNNING:this.pause()}},e.prototype.createElement=function(e,t,n){void 0===t&&(t={});for(var r=document.createElement(e),i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];r[a]=t[a]}return n&&n.appendChild(r),r},e.prototype.createDisplay=function(){return this.createElement("pre",{className:this.config.displayClass},document.body)},e.prototype.createStyle=function(e){return void 0===e&&(e="text/css"),this.createElement("style",{type:e})},e.prototype.createScript=function(e){return void 0===e&&(e="text/javascript"),this.createElement("script",{type:e})},e.prototype.writeAndScrollDisplay=function(e){this.$display.textContent+=e,this.$display.scrollTop=this.$display.scrollHeight},e.prototype.run=function(t){var n=this;return void 0===t&&(t=""),Promise.all([this.paused.promise,this.domReady]).then(function(){n.state=r.RUNNING;var i,a,s,c,p=t.trim().split("\n");return o.asyncForOf(function(t){var r,p=Promise.resolve(),u=t.split(""),l=t.match(e.DIR_RE);return r=l?o.asyncForOf(function(e){return n.writeAndScrollDisplay(e),Promise.all([n.paused.promise,p])},u,n.config.typingSpeed).then(function(){n.$display.textContent+="\n";var t=l[1].split(":"),r=t[0],o=t.slice(1);switch(r.toLowerCase()){case"css":c=null,a=null,s="",i=n.createStyle(),e.appendIfApply(o[0],i,n.$runner);break;case"js":i=null,a=null,s="",c=n.createScript();break;case"html":if(c=null,i=null,s="",o[0]){var u=o[0],d=o[1];"apply"===u.toLowerCase()&&(v=[d||"",u],u=v[0],d=v[1]);var f=u.match(e.SEL_RE);if(u&&f){if(a=document.querySelector(u),!a){var y=[f[1]||"div",f[3],f[4]],h=y[0],m=y[1],E=y[2];if(a=n.createElement(h),m&&E)switch(m){case".":a.className=E;break;case"#":a.id=E}e.appendIfApply(d,a,n.$body)}}else a=n.$defContainer,e.appendIfApply(d,a,n.$body)}a=a||n.$defContainer,s=a.innerHTML;break;case"apply":i&&!e.isElementAttached(i)?(n.$runner.appendChild(i),i=n.createStyle()):a&&!e.isElementAttached(a)?n.$body.appendChild(a):c&&!e.isElementAttached(c)&&(n.$runner.appendChild(c),c=n.createScript());break;case"await":case"promise":window[o[0]]instanceof Promise&&(p=window[o[0]])}return Promise.all([n.paused.promise,p]);var v}):o.asyncForOf(function(e){return n.writeAndScrollDisplay(e),i?i.textContent+=e:a?(s+=e,a.innerHTML=s):c&&(c.textContent+=e),Promise.all([n.paused.promise,p])},u,n.config.typingSpeed).then(function(){return n.writeAndScrollDisplay("\n"),i?i.textContent+="\n":c&&(c.textContent+="\n"),Promise.all([n.paused.promise,p])})},p).then(function(){return i=null,a=null,s="",c=null,n.state=r.READY,Promise.resolve()})})},e.prototype.setTypingSpeed=function(e){this.config.typingSpeed=e},e.prototype.pause=function(){this.paused=new i.Deferred,this.state===r.READY?this.state=r.READY_PAUSED:this.state=r.PAUSED},e.prototype.resume=function(){this.paused.resolve(),this.state===r.READY_PAUSED?this.state=r.READY:this.state=r.RUNNING},e}();a.DIR_RE=/^\s*---\s*([a-z0-9|\-|_|\.|#|:]+)?/i,a.SEL_RE=/^([a-z0-9|\-|_]+)?((\.|#)([a-z0-9|\-|_]+))?$/i,a.DEFAULT_CONFIG={displayClass:"live-coder__display",defaultContainer:"default-container",typingSpeed:50,pauseOnClick:!0,paused:!1},t.Coder=a},function(e,t){"use strict";var n=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return e}();t.Deferred=n},function(e,t,n){"use strict";function r(e,t,n){var r=new a.Deferred,i=function(){t()?e().then(function(){n?setTimeout(i,n):i()}).catch(function(){return r.reject()}):r.resolve()};return i(),r.promise}function i(e,t,n){var i=0,o=t.length,a=function(){return i<o},s=function(){var n=t[i],r=e(n);return i++,r};return r(s,a,n)}function o(){return new Promise(function(e){document.addEventListener("DOMContentLoaded",function(){return e()})})}var a=n(1);t.asyncLoop=r,t.asyncForOf=i,t.waitForDom=o}]);
//# sourceMappingURL=live-coder.min.js.map