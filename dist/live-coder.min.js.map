{"version":3,"sources":["webpack:///dist/live-coder.min.js","webpack:///webpack/bootstrap 387bc7093540bcc299ae","webpack:///./src/index.ts","webpack:///./src/deferred.ts","webpack:///./src/utils.ts"],"names":["Live","modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","deferred_1","utils_1","Coder","config","this","Object","assign","DEFAULT_CONFIG","domReady","waitForDom","paused","Deferred","isPaused","init","isElementAttached","$elem","parentElement","appendIfApply","apply","$container","toLowerCase","appendChild","prototype","_this","then","$runner","document","getElementsByTagName","body","$defContainer","createElement","defaultContainer","$body","$display","createDisplay","pauseOnClick","togglePauseListener","togglePause","bind","addEventListener","pause","resume","tagName","props","$appendTo","_i","_a","keys","length","propName","className","displayClass","createStyle","type","createScript","writeAndScrollDisplay","char","textContent","scrollTop","scrollHeight","continue","continuePromise","Promise","all","promise","run","code","$style","$element","elemInnerHtml","$script","lines","trim","split","asyncForOf","line","forOfPromise","returnPromise","resolve","chars","matchDir","match","DIR_RE","typingSpeed","directive","rest","slice","elem","_b","matchSel","SEL_RE","querySelector","_c","symbol","name_1","innerHTML","window","setTypingSpeed","timeout","setTimeout","getDeferredPromise","destroy","removeEventListener","reject","asyncLoop","fn","condition","delay","deferred","loop","catch","array","index","conditionLoop","bodyLoop","value"],"mappings":"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","file":"dist/live-coder.min.js","sourcesContent":["var Live =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar deferred_1 = __webpack_require__(1);\n\tvar utils_1 = __webpack_require__(2);\n\tvar Coder = (function () {\n\t    function Coder(config) {\n\t        if (config === void 0) { config = {}; }\n\t        this.config = Object.assign({}, Coder.DEFAULT_CONFIG, config);\n\t        this.domReady = utils_1.waitForDom();\n\t        this.paused = new deferred_1.Deferred();\n\t        this.isPaused = true;\n\t        this.init();\n\t    }\n\t    Coder.isElementAttached = function ($elem) {\n\t        return !!$elem.parentElement;\n\t    };\n\t    Coder.appendIfApply = function (apply, $elem, $container) {\n\t        if (apply &&\n\t            $elem &&\n\t            apply.toLowerCase() === 'apply' &&\n\t            !Coder.isElementAttached($elem)) {\n\t            $container && $container.appendChild($elem);\n\t        }\n\t    };\n\t    Coder.prototype.init = function () {\n\t        var _this = this;\n\t        this.domReady.then(function () {\n\t            _this.$runner = document.getElementsByTagName('head')[0] || document.body;\n\t            _this.$defContainer = _this.createElement(_this.config.defaultContainer);\n\t            _this.$body = document.body;\n\t            _this.$display = _this.createDisplay();\n\t            if (_this.config.pauseOnClick) {\n\t                _this.togglePauseListener = _this.togglePause.bind(_this);\n\t                document.addEventListener('click', _this.togglePauseListener);\n\t            }\n\t            if (_this.config.paused) {\n\t                _this.pause();\n\t            }\n\t            else {\n\t                _this.resume();\n\t            }\n\t        });\n\t    };\n\t    Coder.prototype.togglePause = function () {\n\t        if (this.isPaused) {\n\t            this.resume();\n\t        }\n\t        else {\n\t            this.pause();\n\t        }\n\t    };\n\t    Coder.prototype.createElement = function (tagName, props, $appendTo) {\n\t        if (props === void 0) { props = {}; }\n\t        var $elem = document.createElement(tagName);\n\t        for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n\t            var propName = _a[_i];\n\t            $elem[propName] = props[propName];\n\t        }\n\t        if ($appendTo) {\n\t            $appendTo.appendChild($elem);\n\t        }\n\t        return $elem;\n\t    };\n\t    Coder.prototype.createDisplay = function () {\n\t        return this.createElement('pre', { className: this.config.displayClass }, document.body);\n\t    };\n\t    Coder.prototype.createStyle = function (type) {\n\t        if (type === void 0) { type = 'text/css'; }\n\t        return this.createElement('style', { type: type });\n\t    };\n\t    Coder.prototype.createScript = function (type) {\n\t        if (type === void 0) { type = 'text/javascript'; }\n\t        return this.createElement('script', { type: type });\n\t    };\n\t    Coder.prototype.writeAndScrollDisplay = function (char) {\n\t        this.$display.textContent += char;\n\t        this.$display.scrollTop = this.$display.scrollHeight;\n\t    };\n\t    Coder.prototype.continue = function (continuePromise) {\n\t        return Promise.all([this.paused.promise, continuePromise]);\n\t    };\n\t    Coder.prototype.run = function (code) {\n\t        var _this = this;\n\t        if (code === void 0) { code = ''; }\n\t        return this.continue(this.domReady).then(function () {\n\t            var lines = code.trim().split('\\n');\n\t            var $style;\n\t            var $element;\n\t            var elemInnerHtml;\n\t            var $script;\n\t            return utils_1.asyncForOf(function (line) {\n\t                // will resolve for each line processed (either directive or code)\n\t                var forOfPromise;\n\t                // resolved promise by default until await/promise directive\n\t                var returnPromise = Promise.resolve();\n\t                var chars = line.split('');\n\t                var matchDir = line.match(Coder.DIR_RE);\n\t                if (matchDir) {\n\t                    forOfPromise = utils_1.asyncForOf(function (char) {\n\t                        _this.writeAndScrollDisplay(char);\n\t                        return _this.continue(returnPromise);\n\t                    }, chars, _this.config.typingSpeed).then(function () {\n\t                        _this.$display.textContent += '\\n';\n\t                        var _a = matchDir[1].split(':'), directive = _a[0], rest = _a.slice(1);\n\t                        switch (directive.toLowerCase()) {\n\t                            case 'css':\n\t                                // --- css\n\t                                // --- css:apply\n\t                                $script = null;\n\t                                $element = null;\n\t                                elemInnerHtml = '';\n\t                                $style = _this.createStyle();\n\t                                Coder.appendIfApply(rest[0], $style, _this.$runner);\n\t                                break;\n\t                            case 'js':\n\t                                $style = null;\n\t                                $element = null;\n\t                                elemInnerHtml = '';\n\t                                $script = _this.createScript();\n\t                                // can't be apply at this point, only at the end,\n\t                                // would throw exeptions\n\t                                break;\n\t                            case 'html':\n\t                                // --- html ($defContainer)\n\t                                // --- html:apply ($defContainer)\n\t                                // --- html:tag\n\t                                // --- html:tag.class\n\t                                // --- html:.class (tag = div)\n\t                                // --- html:tag#id\n\t                                // --- html:#id (tag = div)\n\t                                // --- html:tag:apply\n\t                                // --- html:apply:tag\n\t                                $script = null;\n\t                                $style = null;\n\t                                elemInnerHtml = '';\n\t                                if (rest[0]) {\n\t                                    var elem = rest[0], apply = rest[1];\n\t                                    // let's swap if the first one is \"apply\"\n\t                                    if (elem.toLowerCase() === 'apply') {\n\t                                        _b = [apply || '', elem], elem = _b[0], apply = _b[1];\n\t                                    }\n\t                                    var matchSel = elem.match(Coder.SEL_RE);\n\t                                    // valid selector?\n\t                                    if (elem && matchSel) {\n\t                                        $element = document.querySelector(elem);\n\t                                        // does the element exist in the DOM?\n\t                                        if (!$element) {\n\t                                            var _c = [\n\t                                                matchSel[1] || 'div',\n\t                                                matchSel[3],\n\t                                                matchSel[4]\n\t                                            ], tagName = _c[0], symbol = _c[1], name_1 = _c[2];\n\t                                            $element = _this.createElement(tagName);\n\t                                            if (symbol && name_1) {\n\t                                                // I know, this is crappy. Only supports classes or ids\n\t                                                // and not even combined.\n\t                                                // TODO: don't be lazy and make it better\n\t                                                switch (symbol) {\n\t                                                    case '.':\n\t                                                        $element.className = name_1;\n\t                                                        break;\n\t                                                    case '#':\n\t                                                        $element.id = name_1;\n\t                                                        break;\n\t                                                }\n\t                                            }\n\t                                            Coder.appendIfApply(apply, $element, _this.$body);\n\t                                        }\n\t                                    }\n\t                                    else {\n\t                                        $element = _this.$defContainer;\n\t                                        Coder.appendIfApply(apply, $element, _this.$body);\n\t                                    }\n\t                                }\n\t                                $element = $element || _this.$defContainer;\n\t                                // in case there was already content\n\t                                // we can continue writing html in the element\n\t                                elemInnerHtml = $element.innerHTML;\n\t                                break;\n\t                            case 'apply':\n\t                                if ($style && !Coder.isElementAttached($style)) {\n\t                                    _this.$runner.appendChild($style);\n\t                                    $style = _this.createStyle();\n\t                                }\n\t                                else if ($element && !Coder.isElementAttached($element)) {\n\t                                    _this.$body.appendChild($element);\n\t                                }\n\t                                else if ($script && !Coder.isElementAttached($script)) {\n\t                                    _this.$runner.appendChild($script);\n\t                                    $script = _this.createScript();\n\t                                }\n\t                                break;\n\t                            case 'await': // --- await:promiseVar\n\t                            case 'promise':\n\t                                if (window[rest[0]] instanceof Promise) {\n\t                                    returnPromise = window[rest[0]];\n\t                                }\n\t                                break;\n\t                        }\n\t                        return _this.continue(returnPromise);\n\t                        var _b;\n\t                    });\n\t                }\n\t                else {\n\t                    forOfPromise = utils_1.asyncForOf(function (char) {\n\t                        _this.writeAndScrollDisplay(char);\n\t                        if ($style) {\n\t                            $style.textContent += char;\n\t                        }\n\t                        else if ($element) {\n\t                            // in order to be able to write dynamic html and\n\t                            // see the changes right away, we need to store\n\t                            // the html as a string and innerHTML this string\n\t                            // into the the element right away. If we don't do so,\n\t                            // we lose markup because it becomes invalid and gets lost\n\t                            elemInnerHtml += char;\n\t                            $element.innerHTML = elemInnerHtml;\n\t                        }\n\t                        else if ($script) {\n\t                            $script.textContent += char;\n\t                        }\n\t                        return _this.continue(returnPromise);\n\t                    }, chars, _this.config.typingSpeed).then(function () {\n\t                        _this.writeAndScrollDisplay('\\n');\n\t                        if ($style) {\n\t                            $style.textContent += '\\n';\n\t                        }\n\t                        else if ($script) {\n\t                            $script.textContent += '\\n';\n\t                        }\n\t                        return _this.continue(returnPromise);\n\t                    });\n\t                }\n\t                return forOfPromise;\n\t            }, lines).then(function () {\n\t                $style = null;\n\t                $element = null;\n\t                elemInnerHtml = '';\n\t                $script = null;\n\t                return Promise.resolve();\n\t            });\n\t        });\n\t    };\n\t    Coder.prototype.setTypingSpeed = function (typingSpeed) {\n\t        this.config.typingSpeed = typingSpeed;\n\t    };\n\t    Coder.prototype.pause = function (timeout) {\n\t        var _this = this;\n\t        this.paused = new deferred_1.Deferred();\n\t        this.isPaused = true;\n\t        if (typeof timeout === 'number') {\n\t            setTimeout(function () { return _this.resume(); }, timeout);\n\t        }\n\t    };\n\t    Coder.prototype.resume = function () {\n\t        this.paused.resolve();\n\t        this.isPaused = false;\n\t    };\n\t    Coder.prototype.getDeferredPromise = function () {\n\t        return new deferred_1.Deferred();\n\t    };\n\t    Coder.prototype.destroy = function () {\n\t        if (this.togglePauseListener) {\n\t            document.removeEventListener('click', this.togglePauseListener);\n\t        }\n\t    };\n\t    Coder.DIR_RE = /^\\s*---\\s*([a-z0-9|\\-|_|\\.|#|:]+)?/i;\n\t    Coder.SEL_RE = /^([a-z0-9|\\-|_]+)?((\\.|#)([a-z0-9|\\-|_]+))?$/i;\n\t    Coder.DEFAULT_CONFIG = {\n\t        displayClass: 'live-coder__display',\n\t        defaultContainer: 'default-container',\n\t        typingSpeed: 50,\n\t        pauseOnClick: true,\n\t        paused: false\n\t    };\n\t    return Coder;\n\t}());\n\texports.Coder = Coder;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Deferred = (function () {\n\t    function Deferred() {\n\t        var _this = this;\n\t        this.promise = new Promise(function (resolve, reject) {\n\t            _this.resolve = resolve;\n\t            _this.reject = reject;\n\t        });\n\t    }\n\t    return Deferred;\n\t}());\n\texports.Deferred = Deferred;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar deferred_1 = __webpack_require__(1);\n\tfunction asyncLoop(fn, condition, delay) {\n\t    var deferred = new deferred_1.Deferred();\n\t    var loop = function () {\n\t        if (condition()) {\n\t            fn()\n\t                .then(function () {\n\t                if (delay) {\n\t                    setTimeout(loop, delay);\n\t                }\n\t                else {\n\t                    loop();\n\t                }\n\t            })\n\t                .catch(function () { return deferred.reject(); });\n\t        }\n\t        else {\n\t            deferred.resolve();\n\t        }\n\t    };\n\t    loop();\n\t    return deferred.promise;\n\t}\n\texports.asyncLoop = asyncLoop;\n\tfunction asyncForOf(fn, array, delay) {\n\t    var index = 0;\n\t    var length = array.length;\n\t    var value;\n\t    var conditionLoop = function () { return index < length; };\n\t    var bodyLoop = function () {\n\t        var value = array[index];\n\t        var promise = fn(value);\n\t        index++;\n\t        return promise;\n\t    };\n\t    return asyncLoop(bodyLoop, conditionLoop, delay);\n\t}\n\texports.asyncForOf = asyncForOf;\n\tfunction waitForDom() {\n\t    return new Promise(function (resolve) {\n\t        document.addEventListener('DOMContentLoaded', function () { return resolve(); });\n\t    });\n\t}\n\texports.waitForDom = waitForDom;\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/live-coder.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 387bc7093540bcc299ae","\"use strict\";\nvar deferred_1 = require('./deferred');\nvar utils_1 = require('./utils');\nvar Coder = (function () {\n    function Coder(config) {\n        if (config === void 0) { config = {}; }\n        this.config = Object.assign({}, Coder.DEFAULT_CONFIG, config);\n        this.domReady = utils_1.waitForDom();\n        this.paused = new deferred_1.Deferred();\n        this.isPaused = true;\n        this.init();\n    }\n    Coder.isElementAttached = function ($elem) {\n        return !!$elem.parentElement;\n    };\n    Coder.appendIfApply = function (apply, $elem, $container) {\n        if (apply &&\n            $elem &&\n            apply.toLowerCase() === 'apply' &&\n            !Coder.isElementAttached($elem)) {\n            $container && $container.appendChild($elem);\n        }\n    };\n    Coder.prototype.init = function () {\n        var _this = this;\n        this.domReady.then(function () {\n            _this.$runner = document.getElementsByTagName('head')[0] || document.body;\n            _this.$defContainer = _this.createElement(_this.config.defaultContainer);\n            _this.$body = document.body;\n            _this.$display = _this.createDisplay();\n            if (_this.config.pauseOnClick) {\n                _this.togglePauseListener = _this.togglePause.bind(_this);\n                document.addEventListener('click', _this.togglePauseListener);\n            }\n            if (_this.config.paused) {\n                _this.pause();\n            }\n            else {\n                _this.resume();\n            }\n        });\n    };\n    Coder.prototype.togglePause = function () {\n        if (this.isPaused) {\n            this.resume();\n        }\n        else {\n            this.pause();\n        }\n    };\n    Coder.prototype.createElement = function (tagName, props, $appendTo) {\n        if (props === void 0) { props = {}; }\n        var $elem = document.createElement(tagName);\n        for (var _i = 0, _a = Object.keys(props); _i < _a.length; _i++) {\n            var propName = _a[_i];\n            $elem[propName] = props[propName];\n        }\n        if ($appendTo) {\n            $appendTo.appendChild($elem);\n        }\n        return $elem;\n    };\n    Coder.prototype.createDisplay = function () {\n        return this.createElement('pre', { className: this.config.displayClass }, document.body);\n    };\n    Coder.prototype.createStyle = function (type) {\n        if (type === void 0) { type = 'text/css'; }\n        return this.createElement('style', { type: type });\n    };\n    Coder.prototype.createScript = function (type) {\n        if (type === void 0) { type = 'text/javascript'; }\n        return this.createElement('script', { type: type });\n    };\n    Coder.prototype.writeAndScrollDisplay = function (char) {\n        this.$display.textContent += char;\n        this.$display.scrollTop = this.$display.scrollHeight;\n    };\n    Coder.prototype.continue = function (continuePromise) {\n        return Promise.all([this.paused.promise, continuePromise]);\n    };\n    Coder.prototype.run = function (code) {\n        var _this = this;\n        if (code === void 0) { code = ''; }\n        return this.continue(this.domReady).then(function () {\n            var lines = code.trim().split('\\n');\n            var $style;\n            var $element;\n            var elemInnerHtml;\n            var $script;\n            return utils_1.asyncForOf(function (line) {\n                // will resolve for each line processed (either directive or code)\n                var forOfPromise;\n                // resolved promise by default until await/promise directive\n                var returnPromise = Promise.resolve();\n                var chars = line.split('');\n                var matchDir = line.match(Coder.DIR_RE);\n                if (matchDir) {\n                    forOfPromise = utils_1.asyncForOf(function (char) {\n                        _this.writeAndScrollDisplay(char);\n                        return _this.continue(returnPromise);\n                    }, chars, _this.config.typingSpeed).then(function () {\n                        _this.$display.textContent += '\\n';\n                        var _a = matchDir[1].split(':'), directive = _a[0], rest = _a.slice(1);\n                        switch (directive.toLowerCase()) {\n                            case 'css':\n                                // --- css\n                                // --- css:apply\n                                $script = null;\n                                $element = null;\n                                elemInnerHtml = '';\n                                $style = _this.createStyle();\n                                Coder.appendIfApply(rest[0], $style, _this.$runner);\n                                break;\n                            case 'js':\n                                $style = null;\n                                $element = null;\n                                elemInnerHtml = '';\n                                $script = _this.createScript();\n                                // can't be apply at this point, only at the end,\n                                // would throw exeptions\n                                break;\n                            case 'html':\n                                // --- html ($defContainer)\n                                // --- html:apply ($defContainer)\n                                // --- html:tag\n                                // --- html:tag.class\n                                // --- html:.class (tag = div)\n                                // --- html:tag#id\n                                // --- html:#id (tag = div)\n                                // --- html:tag:apply\n                                // --- html:apply:tag\n                                $script = null;\n                                $style = null;\n                                elemInnerHtml = '';\n                                if (rest[0]) {\n                                    var elem = rest[0], apply = rest[1];\n                                    // let's swap if the first one is \"apply\"\n                                    if (elem.toLowerCase() === 'apply') {\n                                        _b = [apply || '', elem], elem = _b[0], apply = _b[1];\n                                    }\n                                    var matchSel = elem.match(Coder.SEL_RE);\n                                    // valid selector?\n                                    if (elem && matchSel) {\n                                        $element = document.querySelector(elem);\n                                        // does the element exist in the DOM?\n                                        if (!$element) {\n                                            var _c = [\n                                                matchSel[1] || 'div',\n                                                matchSel[3],\n                                                matchSel[4]\n                                            ], tagName = _c[0], symbol = _c[1], name_1 = _c[2];\n                                            $element = _this.createElement(tagName);\n                                            if (symbol && name_1) {\n                                                // I know, this is crappy. Only supports classes or ids\n                                                // and not even combined.\n                                                // TODO: don't be lazy and make it better\n                                                switch (symbol) {\n                                                    case '.':\n                                                        $element.className = name_1;\n                                                        break;\n                                                    case '#':\n                                                        $element.id = name_1;\n                                                        break;\n                                                }\n                                            }\n                                            Coder.appendIfApply(apply, $element, _this.$body);\n                                        }\n                                    }\n                                    else {\n                                        $element = _this.$defContainer;\n                                        Coder.appendIfApply(apply, $element, _this.$body);\n                                    }\n                                }\n                                $element = $element || _this.$defContainer;\n                                // in case there was already content\n                                // we can continue writing html in the element\n                                elemInnerHtml = $element.innerHTML;\n                                break;\n                            case 'apply':\n                                if ($style && !Coder.isElementAttached($style)) {\n                                    _this.$runner.appendChild($style);\n                                    $style = _this.createStyle();\n                                }\n                                else if ($element && !Coder.isElementAttached($element)) {\n                                    _this.$body.appendChild($element);\n                                }\n                                else if ($script && !Coder.isElementAttached($script)) {\n                                    _this.$runner.appendChild($script);\n                                    $script = _this.createScript();\n                                }\n                                break;\n                            case 'await': // --- await:promiseVar\n                            case 'promise':\n                                if (window[rest[0]] instanceof Promise) {\n                                    returnPromise = window[rest[0]];\n                                }\n                                break;\n                        }\n                        return _this.continue(returnPromise);\n                        var _b;\n                    });\n                }\n                else {\n                    forOfPromise = utils_1.asyncForOf(function (char) {\n                        _this.writeAndScrollDisplay(char);\n                        if ($style) {\n                            $style.textContent += char;\n                        }\n                        else if ($element) {\n                            // in order to be able to write dynamic html and\n                            // see the changes right away, we need to store\n                            // the html as a string and innerHTML this string\n                            // into the the element right away. If we don't do so,\n                            // we lose markup because it becomes invalid and gets lost\n                            elemInnerHtml += char;\n                            $element.innerHTML = elemInnerHtml;\n                        }\n                        else if ($script) {\n                            $script.textContent += char;\n                        }\n                        return _this.continue(returnPromise);\n                    }, chars, _this.config.typingSpeed).then(function () {\n                        _this.writeAndScrollDisplay('\\n');\n                        if ($style) {\n                            $style.textContent += '\\n';\n                        }\n                        else if ($script) {\n                            $script.textContent += '\\n';\n                        }\n                        return _this.continue(returnPromise);\n                    });\n                }\n                return forOfPromise;\n            }, lines).then(function () {\n                $style = null;\n                $element = null;\n                elemInnerHtml = '';\n                $script = null;\n                return Promise.resolve();\n            });\n        });\n    };\n    Coder.prototype.setTypingSpeed = function (typingSpeed) {\n        this.config.typingSpeed = typingSpeed;\n    };\n    Coder.prototype.pause = function (timeout) {\n        var _this = this;\n        this.paused = new deferred_1.Deferred();\n        this.isPaused = true;\n        if (typeof timeout === 'number') {\n            setTimeout(function () { return _this.resume(); }, timeout);\n        }\n    };\n    Coder.prototype.resume = function () {\n        this.paused.resolve();\n        this.isPaused = false;\n    };\n    Coder.prototype.getDeferredPromise = function () {\n        return new deferred_1.Deferred();\n    };\n    Coder.prototype.destroy = function () {\n        if (this.togglePauseListener) {\n            document.removeEventListener('click', this.togglePauseListener);\n        }\n    };\n    Coder.DIR_RE = /^\\s*---\\s*([a-z0-9|\\-|_|\\.|#|:]+)?/i;\n    Coder.SEL_RE = /^([a-z0-9|\\-|_]+)?((\\.|#)([a-z0-9|\\-|_]+))?$/i;\n    Coder.DEFAULT_CONFIG = {\n        displayClass: 'live-coder__display',\n        defaultContainer: 'default-container',\n        typingSpeed: 50,\n        pauseOnClick: true,\n        paused: false\n    };\n    return Coder;\n}());\nexports.Coder = Coder;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.ts\n// module id = 0\n// module chunks = 0","\"use strict\";\nvar Deferred = (function () {\n    function Deferred() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/deferred.ts\n// module id = 1\n// module chunks = 0","\"use strict\";\nvar deferred_1 = require('./deferred');\nfunction asyncLoop(fn, condition, delay) {\n    var deferred = new deferred_1.Deferred();\n    var loop = function () {\n        if (condition()) {\n            fn()\n                .then(function () {\n                if (delay) {\n                    setTimeout(loop, delay);\n                }\n                else {\n                    loop();\n                }\n            })\n                .catch(function () { return deferred.reject(); });\n        }\n        else {\n            deferred.resolve();\n        }\n    };\n    loop();\n    return deferred.promise;\n}\nexports.asyncLoop = asyncLoop;\nfunction asyncForOf(fn, array, delay) {\n    var index = 0;\n    var length = array.length;\n    var value;\n    var conditionLoop = function () { return index < length; };\n    var bodyLoop = function () {\n        var value = array[index];\n        var promise = fn(value);\n        index++;\n        return promise;\n    };\n    return asyncLoop(bodyLoop, conditionLoop, delay);\n}\nexports.asyncForOf = asyncForOf;\nfunction waitForDom() {\n    return new Promise(function (resolve) {\n        document.addEventListener('DOMContentLoaded', function () { return resolve(); });\n    });\n}\nexports.waitForDom = waitForDom;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils.ts\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}